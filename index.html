<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$FTXSOL - The Comeback Meme Coin</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/game.css">
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDkMdcoQJohuFq1TxQmzI9rUEVwtPeXXcM",
            authDomain: "ftxsol.firebaseapp.com",
            databaseURL: "https://ftxsol-default-rtdb.firebaseio.com/", <!-- Ensure the database URL is correct -->
            projectId: "ftxsol",
            storageBucket: "ftxsol.appspot.com",
            messagingSenderId: "90196404818",
            appId: "1:90196404818:web:a9266e059fb8838b548d8b",
            measurementId: "G-0ZVLGDTGM0"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Save high score function
        window.saveHighScore = async function(event) {
            event.preventDefault();

            const playerName = document.getElementById("playerName").value.trim() || "Anonymous";
            const score = parseInt(document.getElementById("currentScore").textContent, 10);

            try {
                const highScoresRef = ref(database, "highScores");
                const newScoreRef = push(highScoresRef);
                await set(newScoreRef, { name: playerName, score: score });

                alert("High score saved!");
                displayHighScores();
            } catch (error) {
                console.error("Error saving high score:", error);
                alert("Failed to save high score. Check the console for details.");
            }
        };

        // Display high scores
        window.displayHighScores = async function() {
            const highScoresList = document.getElementById("highScoresList");
            highScoresList.innerHTML = "";

            const highScoresRef = ref(database, "highScores");
            const snapshot = await get(highScoresRef);
            if (snapshot.exists()) {
                const highScores = Object.values(snapshot.val()).sort((a, b) => b.score - a.score).slice(0, 10);
                highScores.forEach(({ name, score }) => {
                    highScoresList.innerHTML += `<li>${name}: ${score}</li>`;
                });
            }
        };
    </script>
</head>
<body>
    <header>
        <h1>$FTXSOL</h1>
        <p>"Pump it, don’t dump it!"</p>
    </header>

    <section id="about">
        <h2>About $FTXSOL</h2>
        <img src="assets/images/ftxsollogoremove.png" alt="Token Logo" width="350" height="350" />
        <p>$FTXSOL is a meme coin built on Solana, symbolizing resilience and recovery in the crypto world. Join the movement and be part of the comeback story!</p>
    </section>

    <section id="game">
        <h2>Play #FTXSOL Bird!</h2>
        <div id="gameContainer" style="position: relative; width: 320px; margin: 0 auto;">
            <button id="playButton" class="btn" style="position: absolute; top: 200px; left: 90px; z-index: 2;">Play Game</button>
            <canvas id="gameCanvas" style="display: block; background-color: #f9f9f9;"></canvas>
        </div>
        <div class="game-over" id="gameOverMessage" style="display: none;">
            <p>Game Over!</p>
            <p>Your Score: <span id="currentScore">0</span></p>
            <form id="highScoreForm" onsubmit="saveHighScore(event)">
                <label for="playerName">Enter your name:</label>
                <input type="text" id="playerName" maxlength="10" placeholder="Your name" required />
                <button type="submit">Save Score</button>
            </form>
            <button class="restart-btn" id="restartButton" style="display: none;">Restart</button>
            <h3>Top 10 High Scores</h3>
            <ol id="highScoresList"></ol>
        </div>
    </section>

    <section id="community">
        <h2>Join the Community</h2>
        <a href="https://t.me/+0WdyS7CWtdo0NTk5" target="_blank" class="btn">Telegram</a>
        <a href="https://x.com/ftxsol_?s=21&t=i7a15TmSrjZUgzU8gYwxxg" target="_blank" class="btn">X</a>
    </section>

    <footer>
        <p>© 2024 $FTXSOL - The Comeback Meme Coin. Built with love and memes.</p>
    </footer>
</body>
</html>
